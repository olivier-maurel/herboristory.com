{% extends 'base.html.twig' %}

{% block title %}Post{% endblock %}

{% block body %}
    <!-- <a href="{{ path('app_post_index') }}">back to list</a>

    <a href="{{ path('app_post_edit', {'id': post.id}) }}">edit</a>

    {{ include('post/_delete_form.html.twig') }} -->

        <a href="{{ setReferer(app.request) }}" class="btn btn-danger">Retour</a>
    <article class="py-5">


        <section class="position-relative py-0">
            {% if ((post.plant.category|isToxic) == true) %}
                <div class="col-12 alert alert-danger alert-dismissible fade in show" role="alert">
                    <!-- <button type="button" class="btn-close line-height-unset" data-bs-dismiss="alert" aria-label="Close"></button> -->
                    <strong class="d-block text-center text-danger h3">Danger!</strong>
                    <span class="text-center d-block">Cette plante présente des effets toxiques ou néfaste pour la santé. Soyez vigilant...</span>
                    <div class="row mt-5 px-5">
                        <div class="col-lg-6">
                            <p class="m-0">Cette plante présente des similarités avec :</p>
                            <ul class="list-unstyled ms-3">
                                {% for plant in post.plant.similitudes %}
                                    <li class="fw-bold">- <a class="text-danger" href="{{ path('app_post_show', {slug: plant.post.slug}) }}">{{ plant.commonName }}</a></li>
                                {% endfor %}
                            </ul>
                        </div>
                        <div class="col-lg-6 flex-center flex-column">
                            <p class="m-0">Cette plante présente des similarités avec :</p>
                            <ul class="list-unstyled ms-3">
                                {% for plant in post.plant.similitudes %}
                                    <li class="fw-bold">- <a class="text-danger" href="{{ path('app_post_show', {slug: plant.post.slug}) }}">{{ plant.commonName }}</a></li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
            {% endif %}
            <img src="{{ post.image ?: 'https://via.placeholder.com/800x650' }}" class="vignette-image w-100" style="height: 450px !important;" alt="Photo principale - {{ post.plant.commonName }}">
            <div class="w-100 d-flex justify-content-end middle-top px-2">
                {% for key, category in post.plant.category %}
                    <i class="fa {{ key|getIcon }} text-white round type-icon-lg mx-1" title="{{ key|getAlt }}"></i>
                {% endfor %}
            </div>
        </section>

        <div class="row flex-row-reverse py-4">
            <div class="col-lg-5">
                <section class="p-0 position-sticky" style="top: .4rem;">
                    <div class="card">
                        <div class="card-head pt-4">
                            <span class="h5 alt-font small text-center d-block mb-0">Sommaire</span>
                            <ul class="grid-filter nav nav-tabs justify-content-center border-0 text-uppercase font-weight-500 alt-font border-bottom pb-3">
                                {% if post.content.medicinalPage is not null %}
                                    <li class="nav"><a href="#medicinalPage" class="btn btn-sm">Médicinale</a></li>
                                {% endif %}
                    
                                {% if post.content.alimentalPage is not null %}
                                    <li class="nav"><a href="#alimentalPage" class="btn btn-sm">Comestible</a></li>
                                {% endif %}
                    
                                {% if post.content.agricolPage is not null %}
                                    <li class="nav"><a href="#agricolPage" class="btn btn-sm">Agricole</a></li>
                                {% endif %}
                    
                                {% if post.content.industrialPage is not null %}
                                    <li class="nav"><a href="#industrialPage" class="btn btn-sm">Artisanale</a></li>
                                {% endif %}
                            </ul>
                        </div>
                        <div class="card-body">
                            <table class="w-100 mt-4">
                                <tbody>
                                    <tr>
                                        <td class="text-muted small text-end">Nom commun : </td>
                                        <td class="text-black text-uppercase fw-bold ps-4">{{ post.plant.commonName }}</td>
                                    </tr>
                                    <tr>
                                        <td class="text-muted small text-end">Classe : </td>
                                        <td class="text-black text-uppercase fw-bold ps-4">{{ post.plant.scientificClass }}</td>
                                    </tr>
                                    <tr>
                                        <td class="text-muted small text-end">Ordre : </td>
                                        <td class="text-black text-uppercase fw-bold ps-4">{{ post.plant.scientificOrder }}</td>
                                    </tr>
                                    <tr>
                                        <td class="text-muted small text-end">Famille : </td>
                                        <td class="text-black text-uppercase fw-bold ps-4">{{ post.plant.scientificFamily }}</td>
                                    </tr>
                                    <tr>
                                        <td class="text-muted small text-end">Genre : </td>
                                        <td class="text-black text-uppercase fw-bold ps-4">{{ post.plant.scientificGenus }}</td>
                                    </tr>
                                    <tr>
                                        <td class="text-muted small text-end">Espèce : </td>
                                        <td class="text-black text-uppercase fw-bold ps-4">{{ post.plant.scientificSpecies }}</td>
                                    </tr>
                                </tbody>
                            </table>
                            <div>
                                <h5>Similarités</h5>
                                <ul>
                                    {% for plant in post.plant.similitudes %}
                                        <li><a href="{{ path('app_post_show', {slug: plant.post.slug}) }}">
                                            <img src="{{ plant.post.image }}" class="img-round-sm">
                                            {{ plant.commonName }}
                                        </a></li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
            
            <div class="col-lg-7">
                {% if post.content.medicinalPage is not null %}
                    <section id="medicinalPage" class="py-3">
                        <h2>Médicinale</h2>
                        <p>{{ post.content.medicinalPage }}</p>
                    </section>
                {% endif %}
    
                {% if post.content.alimentalPage is not null %}
                    <section id="alimentalPage" class="py-3">
                        <h2>Comestible</h2>
                        <p>{{ post.content.alimentalPage }}</p>
                    </section>
                {% endif %}
    
                {% if post.content.agricolPage is not null %}
                    <section id="agricolPage" class="py-3">
                        <h2>agricole</h2>
                        <p>{{ post.content.AgricolPage }}</p>
                    </section>
                {% endif %}
    
                {% if post.content.industrialPage is not null %}
                    <section id="industrialPage" class="py-3">
                        <h2>Artisanale</h2>
                        <p>{{ post.content.industrialPage }}</p>
                    </section>
                {% endif %}
            </div>
        </div>

    </article>
{% endblock %}
